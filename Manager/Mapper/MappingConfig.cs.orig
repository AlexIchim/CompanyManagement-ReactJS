using System.Linq;
using AutoMapper;
using Domain.Models;
using Manager.InfoModels;
using Manager.InputInfoModels;

namespace Manager.Mapper
{
    public class MappingConfig: Profile
    {
        public MappingConfig()
        {
            CreateMap<Department, DepartmentInfo>();
            CreateMap<AddDepartmentInputInfo, Department>();
            CreateMap<Office, OfficeInfo>();

            CreateMap<Project, ProjectInfo>();
            CreateMap<Employee, EmployeeInfo>();
            CreateMap<Employee, EmployeeAllocationInfo>();
            CreateMap<Department, DepartmentInfo>().ForMember(
                 di => di.NbrOfEmployees,
                 d => d.MapFrom(src => src.Employees.Count)
             ).ForMember(
                 di => di.NbrOfProjects,
                 d => d.MapFrom(src => src.Projects.Count)
             ).ForMember(
                 di => di.DepartmentManager,
                 d => d.MapFrom(src => src.DepartmentManager.Name)
<<<<<<< HEAD
            CreateMap<Project, ProjectInfo>().ForMember(
                pi => pi.EmployeesNumber,
                proj => proj.MapFrom(src => src.EmployeeProjects.Count)
             );
=======
            CreateMap<Employee, MemberInfo>();

            
>>>>>>> origin/capac-Adi
        }
    }
}